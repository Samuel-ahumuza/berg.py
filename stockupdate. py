import time

# Initial Stock represented by a dictionary
stock = {
    "Milk": 150,
    "Bread": 200,
    "Eggs": 100,
    "Apples": 50,
    "Chicken": 75
}

def display_stock():
    """Displays the current stock levels of all products."""
    print("\n" + "="*40)
    print("      üè™ Current Stock Availability")
    print("="*40)
    # Using a list comprehension to format the output neatly
    print("\n".join(f"{product}: **{quantity}** units" for product, quantity in stock.items()))
    print("="*40)

def restock_item(product_name, quantity_added):
    """Adds stock (Input) to a product."""
    product_name = product_name.capitalize() # Standardize capitalization
    if product_name in stock:
        stock[product_name] += quantity_added
        print(f"‚úÖ RESTOCK SUCCESS: Added {quantity_added} units of {product_name}.")
    else:
        # If the product is new, add it to the dictionary
        stock[product_name] = quantity_added
        print(f"‚úÖ NEW ITEM ADDED: {product_name} added with initial stock of {quantity_added} units.")

def record_sale(product_name, quantity_sold):
    """Records a sale (Output) and updates stock."""
    product_name = product_name.capitalize() # Standardize capitalization
    
    if product_name not in stock:
        print(f"‚ùå ERROR: Product '{product_name}' is not tracked in the inventory.")
        return

    if stock[product_name] >= quantity_sold:
        stock[product_name] -= quantity_sold
        print(f"‚úÖ SALE SUCCESS: Sold {quantity_sold} units of {product_name}.")
        
        # Check for low stock alert
        if stock[product_name] < 10 and stock[product_name] > 0:
            print(f"‚ö†Ô∏è LOW STOCK ALERT! {product_name} is now at {stock[product_name]} units.")
        elif stock[product_name] == 0:
             print(f"üö® OUT OF STOCK ALERT! {product_name} is now completely sold out.")

    else:
        print(f"‚ùå ERROR: Cannot sell {quantity_sold} units of {product_name}. Only {stock[product_name]} available.")


def run_supermarket_system():
    """The main loop to run the stock management system 24/7."""
    
    print("üõí Starting Supermarket Stock Management System...")
    time.sleep(1) # Pause for a moment

    while True:
        display_stock()

        # Display menu options
        print("\n--- Available Actions ---")
        print("1: **Restock** (Add stock Input)")
        print("2: **Record Sale** (Subtract stock Output)")
        print("3: **Exit** system")
        
        action = input("Enter your choice (1, 2, or 3): ").strip()

        try:
            if action == '1':
                # --- Restock Action ---
                print("\n--- RESTOCK MODE ---")
                product = input("Enter product name to restock: ").strip()
                quantity = int(input("Enter quantity to add: ").strip())
                if quantity > 0:
                    restock_item(product, quantity)
                else:
                    print("‚ö†Ô∏è Quantity must be a positive number.")

            elif action == '2':
                # --- Sale Action ---
                print("\n--- SALE MODE ---")
                product = input("Enter product name sold: ").strip()
                quantity = int(input("Enter quantity sold: ").strip())
                if quantity > 0:
                    record_sale(product, quantity)
                else:
                    print("‚ö†Ô∏è Quantity must be a positive number.")

            elif action == '3':
                # --- Exit Action ---
                print("\nüëã System shutting down. Thank you!")
                break
            
            else:
                print("‚ùå Invalid choice. Please enter 1, 2, or 3.")

        except ValueError:
            print("‚ùå Invalid input. Please ensure quantity is a whole number.")
        except Exception as e:
            print(f"An unexpected error occurred: {e}")
        
        # Wait a moment before looping again
        print("\n" + "*"*40)
        input("Press Enter to continue/view updated stock...")
        
# Execute the main function
if __name__ == "__main__":
    run_supermarket_system()
